<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Stint+Ultra+Expanded&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=3">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- MY CUSTOM CSS -->
      <link href="https://pagecdn.io/lib/easyfonts/pecita.css" rel="stylesheet" />
      <link rel="stylesheet" href="./happyNewyear.css">

      <!-- og tags -->
      <title>happy new year 2022</title>
      <meta property="og:title" content="Happy new year 2022" />
      <meta property="og:type" content="happ new year" />
      <meta property="og:url" content="https://thechromosomes.github.io/newYear2022/" />
      <meta property="og:image" content="./tree.svg" />


    <script type="text/javascript">
      function clickEffect(e){
        var d=document.createElement("div");
        d.className="clickEffect";
        d.style.top=e.clientY+"px";d.style.left=e.clientX+"px";
        document.body.appendChild(d);
        d.addEventListener('animationend',function(){d.parentElement.removeChild(d);}.bind(this));
      }
      document.addEventListener('click',clickEffect);
    </script>

  </head>

<body>

<div class="neon-bar">
  <progress class='bar' value='0' max='100'></progress>
</div>
  <!-- for button audio -->
  <div id="full_screen">
    <audio id="myAudio" preload loop>
      <source src="./type.wav" type="audio/ogg">
    </audio>
  <!-- ....... -->

    <!-- main body -->
    <h3 onclick="tadaFunction()">HAPPY NEW YEAR 2022 :)</h3>  
    <img onclick="tadaFunction()" src = "./tree.svg" alt="My Happy SVG"/>
    <p>hi there. how are you?</p>

     
    <button onclick="typeWriter()"> <a href ="#">
      <span></span>
      <span></span>
      <span></span>
      <span></span>I am fine.</a></button>

    <p id="para0"></p>
    <button id="button0" style="display: none;" onclick="typeWriter1()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>yes. what is this ?</a></button>

    <p id="para1"></p>
    <button id="button1" style="display: none;" onclick="typeWriter2()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>it's wired</a></button>

    <p id="para2"></p>
    <button id="button2" style="display: none;" onclick="typeWriter3()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>Ok. lets see. count me in</a></button>


    <button id="button2_1" style="display: none;" onclick="exitWindow()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>No. I don't like it. plus I am busy with the shift.</a></button>


    <p id="para3"></p>
    <button id="button3" style="display: none;" onclick="typeWriter4()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>haa bawa I am fine. Look I am smiling :) plus I am <del>little</del> very excited for the new year.</a></button>

    <p id="para4"></p>
    <button id="button4" style="display: none;" onclick="typeWriter5()"><a href ="#tweety">
      <span></span>
      <span></span>
      <img class="displayBlock" src = "./eyeRoll.gif" id="tweety" alt="My Happy eyeRoll"/>
      <span></span>you are...</a></button>

    <p id="para5"></p>
    <button id="button5" style="display: none;" onclick="typeWriter6()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>I'll do it later maybe.</a></button>

    <p id="para6"></p>
    <button id="button6" style="display: none;" onclick="typeWriter7()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>let me see it.</a></button>
    <!-- end main body -->


    <!-- wish card  -->
    <div class='' id="wish_card" style="display: none;">
      <div class='card' >
          <div class='front face' >
              <img src='./mainCard.png'/>
          </div>
          <div class="back face">
              <p> Hope this year bring you tons of great memories filled with good vibes. *Keep smiling* </p>
          </div>
      </div>
    </div>
  </br>
  <!-- end wish card -->

   <div id="wish_card2" style="display: none;">
      <img class="displayBlock" src='./insideOUT.gif'/>
      <p>Make the perfect balance of all your  EMOTIONS.</p>
    </div>


    <p id="para7"></p>
    <div class="mount"></div>
    <button id="button7" style="display: none;" onclick="typeWriter8()"><a href ="#">
      <span></span>
      <span></span>
      <span></span>it was okay type. And I have to rush out. BYE HAA</a></button>

      <p id="para8"></p>

    <p id="paraGift"></p>
    <button id="buttonGift" style="display: none;" ><a href ="./yourGift.html">
      <span></span>
      <span></span>
      <span></span>And where is my gift?</a></button>




  </div>

<script>
var speed = 60;
var sound = document.getElementById("myAudio");

// exit function
function exitWindow(){
  let exit = confirm("you Sure? you are about to quit the session ... are you really going to hit OK?");
  if (exit == true) {
    document.getElementsByTagName ('html') [0] .remove ()
    window.close();
  } else {
    typeWriter3()
  }
}



// text here
var i = 0;
var txt = `happy to hear that you are having good days. Are you confused about "what is happening right here?" `;

var i1 = 0;
var txt1 = `well, calm down! you are already familiar with this layout. See another new year is started. I know this is the cliche tag line but "ye saal kasise khatam ho gaya pata hi nahi chala, (he naa)" I could not miss the opportunity to wish you the best in the world on this beautiful day. so here we are. I don't know if you like this method of wishing new year` 

var i2 = 0;
var txt2= `yeah! I know it is still weird. but you know, coding is in the blood :) let's stick with it naa. just a little...`;

var i3 = 0;
var txt3= `you are not ending the session... welcome onboard... so again are you fine naa. I mean obviously, a new year with tons of excitement is finally hitting the door. `;

var i4 = 0;
var txt4 = `Cool... to be honest, I am also excited for the new year.  I reminisce on all of the great things that you have brought me. Thank you for such an amazing friendship, endless love, and support. I am so grateful to have had you by my side through thick and thin and I canâ€™t wait for what is to come in the New Year.`

var i5 = 0;
var txt5 =`I want you to take a long breath, forget everything, a cute smile, amazing vibes, and think about something that makes you... *YOU* 
see, there is a struggle, there is pain, and there is life. `

var i6 = 0;
var txt6 = `Ok fine. you might remember... That kinda hand-made card you witness earlier. NO? `

var i7 = 0;
var txt7 = `Don't laugh haa *unfair* `

var i8 = 0;
var txt8 = `I hope everything has fulfilled that I have programmed.  Happy new year 2022 my dear! BYE :-*`


// function here
function typeWriter() {
  sound.play()
  if (i < txt.length) {
    document.getElementById("para0").innerHTML += txt.charAt(i);
    $(document).scrollTop($(document).height());
    i++;
    setTimeout(typeWriter, speed);
  }
  if (i == txt.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button0").style = `display: "block"`
  }
}

function typeWriter1() {
  sound.play()
  if (i1 < txt1.length) {
    document.getElementById("para1").innerHTML += txt1.charAt(i1);
    $(document).scrollTop($(document).height());
    i1++;
    setTimeout(typeWriter1, speed);
  }
  if (i1 == txt1.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button1").style = `display: "block"`
  }
}

function typeWriter2() {
  sound.play()
  if (i2 < txt2.length) {
    document.getElementById("para2").innerHTML += txt2.charAt(i2);
    $(document).scrollTop($(document).height());
    i2++;
    setTimeout(typeWriter2, speed);
  }
  if (i2 == txt2.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button2").style = `display: "block"`
    document.getElementById("button2_1").style = `display: "block"`

  }
}

function typeWriter3() {
  sound.play()
  if (i3 < txt3.length) {
    document.getElementById("para3").innerHTML += txt3.charAt(i3);
    $(document).scrollTop($(document).height());
    i3++;
    setTimeout(typeWriter3, speed);
  }
  if (i3 == txt3.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button3").style = `display: "block"`
  }
}

function typeWriter4() {
  sound.play()
  if (i4 < txt4.length) {
    document.getElementById("para4").innerHTML += txt4.charAt(i4);
    $(document).scrollTop($(document).height());
    i4++;
    setTimeout(typeWriter4, speed);
  }
  if (i4 == txt4.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button4").style = `display: "block"`
  }
}

function typeWriter5() {
  sound.play()
  if (i5 < txt5.length) {
    document.getElementById("para5").innerHTML += txt5.charAt(i5);
    $(document).scrollTop($(document).height());
    i5++;
    setTimeout(typeWriter5, speed);
  }
  if (i5 == txt5.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button5").style = `display: "block"`
  }
}

function typeWriter6() {
  sound.play()
  if (i6 < txt6.length) {
    document.getElementById("para6").innerHTML += txt6.charAt(i6);
    $(document).scrollTop($(document).height());
    i6++;
    setTimeout(typeWriter6, speed);
  }
  if (i6 == txt6.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button6").style = `display: "block"`

  }
}

function typeWriter7() {
  sound.play()
  if (i7 < txt7.length) {
    document.getElementById("para7").innerHTML += txt7.charAt(i7);
    $(document).scrollTop($(document).height());
    i7++;
    setTimeout(typeWriter7, speed);
  }
  if (i7 == txt7.length){
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("button7").style = `display: "block"`
    document.getElementById("wish_card").style = `display: "block"`
    document.getElementById("wish_card2").style = `display: "block"`



  }
}

function tadaFunction (){
  // Dom confetti by Daniel Lundin (https://github.com/daniel-lundin/dom-confetti)
  const colors = [
    '#a864fd',
    '#29cdff',
    '#78ff44',
    '#ff718d',
    '#fdff6a'
  ];

  function createElements(root, elementCount) {
    return Array
      .from({ length: elementCount })
      .map((_, index) => {
        const element = document.createElement('div');
        element.classList = ['fetti'];
        const color = colors[index % colors.length];
        element.style['background-color']= color; // eslint-disable-line space-infix-ops
        element.style.width = '10px';
        element.style.height = '10px';
        element.style.position = 'absolute';
        root.appendChild(element);
        return element;
      });
  }

  function randomPhysics(angle, spread, startVelocity) {
    const radAngle = angle * (Math.PI / 180);
    const radSpread = spread * (Math.PI / 180);
    return {
      x: 0,
      y: 0,
      wobble: Math.random() * 10,
      velocity: (startVelocity * 0.5) + (Math.random() * startVelocity),
      angle2D: -radAngle + ((0.5 * radSpread) - (Math.random() * radSpread)),
      angle3D: -(Math.PI / 4) + (Math.random() * (Math.PI / 2)),
      tiltAngle: Math.random() * Math.PI
    };
  }

  function updateFetti(fetti, progress, decay) {
    /* eslint-disable no-param-reassign */
    fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;
    fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;
    fetti.physics.z += Math.sin(fetti.physics.angle3D) * fetti.physics.velocity;
    fetti.physics.wobble += 0.1;
    fetti.physics.velocity *= decay;
    fetti.physics.y += 3;
    fetti.physics.tiltAngle += 0.1;

    const { x, y, tiltAngle, wobble } = fetti.physics;
    const wobbleX = x + (10 * Math.cos(wobble));
    const wobbleY = y + (10 * Math.sin(wobble));
    const transform = `translate3d(${wobbleX}px, ${wobbleY}px, 0) rotate3d(1, 1, 1, ${tiltAngle}rad)`;

    fetti.element.style.transform = transform;
    fetti.element.style.opacity = 1 - progress;

    /* eslint-enable */
  }

  function animate(root, fettis, decay) {
    const totalTicks = 200;
    let tick = 0;

    function update() {
      fettis.forEach((fetti) => updateFetti(fetti, tick / totalTicks, decay));

      tick += 1;
      if (tick < totalTicks) {
        requestAnimationFrame(update);
      } else {
        fettis.forEach((fetti) => root.removeChild(fetti.element));
      }
    }

    requestAnimationFrame(update);
  }

  function confetti(root, {
      angle = 90,
      decay = 0.9,
      spread = 45,
      startVelocity = 45,
      elementCount = 50
    } = {}) {
    const elements = createElements(root, elementCount);
    const fettis = elements.map((element) => ({
      element,
      physics: randomPhysics(angle, spread, startVelocity)
    }));

    animate(root, fettis, decay);
  }

  const mount = document.querySelector('.mount')
  confetti(mount)
  }

function typeWriter8() {
  sound.play()
  if (i8 < txt8.length) {
    document.getElementById("para8").innerHTML += txt8.charAt(i8);
    $(document).scrollTop($(document).height());
    i8++;
    setTimeout(typeWriter8, speed);
  }
  if (i8 == txt8.length){
  tadaFunction()
    sound.pause()
    $(document).scrollTop($(document).height());
    document.getElementById("buttonGift").style = `display: "block"`

  }
}


// click effect
function clickEffect(e){
	var d=document.createElement("div");
	d.className="clickEffect";
	d.style.top=e.clientY+"px";d.style.left=e.clientX+"px";
	document.body.appendChild(d);
	d.addEventListener('animationend',function(){d.parentElement.removeChild(d);}.bind(this));
}
document.addEventListener('click',clickEffect);

// progress bar
const progressBar = document.querySelector(".bar"),
progressBarValue = document.querySelector('.bar__value');
let value = 0;
const progressDiv = document.querySelector(".neon-bar");

const max = 100;

let anim = setInterval(() => {
  if (value == max) {
    clearInterval(anim);
  tadaFunction()
    progressDiv.style.display = "none";
  } else {
    value += 1;
    progressBar.value = value;
  }
},0);


// tada effect
// Dom confetti by Daniel Lundin (https://github.com/daniel-lundin/dom-confetti)
const colors = [
  '#a864fd',
  '#29cdff',
  '#78ff44',
  '#ff718d',
  '#fdff6a'
];

function createElements(root, elementCount) {
  return Array
    .from({ length: elementCount })
    .map((_, index) => {
      const element = document.createElement('div');
      element.classList = ['fetti'];
      const color = colors[index % colors.length];
      element.style['background-color']= color; // eslint-disable-line space-infix-ops
      element.style.width = '10px';
      element.style.height = '10px';
      element.style.position = 'absolute';
      root.appendChild(element);
      return element;
    });
}

function randomPhysics(angle, spread, startVelocity) {
  const radAngle = angle * (Math.PI / 180);
  const radSpread = spread * (Math.PI / 180);
  return {
    x: 0,
    y: 0,
    wobble: Math.random() * 10,
    velocity: (startVelocity * 0.5) + (Math.random() * startVelocity),
    angle2D: -radAngle + ((0.5 * radSpread) - (Math.random() * radSpread)),
    angle3D: -(Math.PI / 4) + (Math.random() * (Math.PI / 2)),
    tiltAngle: Math.random() * Math.PI
  };
}

function updateFetti(fetti, progress, decay) {
  /* eslint-disable no-param-reassign */
  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;
  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;
  fetti.physics.z += Math.sin(fetti.physics.angle3D) * fetti.physics.velocity;
  fetti.physics.wobble += 0.1;
  fetti.physics.velocity *= decay;
  fetti.physics.y += 3;
  fetti.physics.tiltAngle += 0.1;

  const { x, y, tiltAngle, wobble } = fetti.physics;
  const wobbleX = x + (10 * Math.cos(wobble));
  const wobbleY = y + (10 * Math.sin(wobble));
  const transform = `translate3d(${wobbleX}px, ${wobbleY}px, 0) rotate3d(1, 1, 1, ${tiltAngle}rad)`;

  fetti.element.style.transform = transform;
  fetti.element.style.opacity = 1 - progress;

  /* eslint-enable */
}

function animate(root, fettis, decay) {
  const totalTicks = 200;
  let tick = 0;

  function update() {
    fettis.forEach((fetti) => updateFetti(fetti, tick / totalTicks, decay));

    tick += 1;
    if (tick < totalTicks) {
      requestAnimationFrame(update);
    } else {
      fettis.forEach((fetti) => root.removeChild(fetti.element));
    }
  }

  requestAnimationFrame(update);
}

</script>

</body>
</html>
